!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Video=e()}(this,function(){"use strict";function t(t,e){e.appendChild(t)}function e(t,e,n){e.insertBefore(t,n)}function n(t){t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function r(t){return document.createTextNode(t)}function o(t){return t?this._state[t]:this._state}function s(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,e)}function a(t,e,n){var i=n&&n.defer?this._observers.pre:this._observers.post;return(i[t]||(i[t]=[])).push(e),n&&n.init===!1||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=i[t].indexOf(e);~n&&i[t].splice(n,1)}}}function h(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function l(t,e,n,i){for(var r in e)if(r in n){var o=n[r],s=i[r];if(o!==s||"object"==typeof o){var a=e[r];if(a)for(var h=0;h<a.length;h+=1){var l=a[h];l.__calling||(l.__calling=!0,l.call(t,o,s),l.__calling=!1)}}}}function c(o,s){function a(t){s.togglePlay()}var h=i("div");h.className="sf-video",h.style.cssText="width: "+o.width+"px; height: "+o.height+"px;";var l=i("video");s.refs.video=l,l.width=o.width,l.height=o.height,l.src=o.src,l.loop=o.loop,t(l,h),t(r("\n  "),h);var c=i("div");c.className="sf-video-controls",t(c,h);var f=i("label");f.className="sf-video-controls--play",t(f,c);var d=i("input");s.refs.togglePlay=d,d.type="checkbox",d.addEventListener("change",a,!1),t(d,f),t(r("\n      "),f);var u=i("span");return t(u,f),{mount:function(t,n){e(h,t,n)},update:function(t,e){h.style.cssText="width: "+e.width+"px; height: "+e.height+"px;",l.width=e.width,l.height=e.height,l.src=e.src,l.loop=e.loop},teardown:function(t){s.refs.video===l&&(s.refs.video=null),s.refs.togglePlay===d&&(s.refs.togglePlay=null),d.removeEventListener("change",a,!1),t&&n(h)}}}function f(t){t=t||{},this.refs={},this._state=t.data||{},this._observers={pre:Object.create(null),post:Object.create(null)},this._handlers=Object.create(null),this._root=t._root,this._yield=t._yield,this._fragment=c(this._state,this),t.target&&this._fragment.mount(t.target,null),t._root?t._root._renderHooks.push({fn:d.onrender,context:this}):d.onrender.call(this)}var d=function(){return{onrender:function(){var t=this.refs.video,e=this.refs.togglePlay;t.onended=function(){e.checked=!1}},methods:{togglePlay:function(){var t=this.refs.video;t.paused?t.play():t.pause()}}}}();return f.prototype=d.methods,f.prototype.get=o,f.prototype.fire=s,f.prototype.observe=a,f.prototype.on=h,f.prototype.set=function(t){var e=this._state;this._state=Object.assign({},e,t),l(this,this._observers.pre,t,e),this._fragment&&this._fragment.update(t,this._state),l(this,this._observers.post,t,e)},f.prototype.teardown=function(t){this.fire("teardown"),this._fragment.teardown(t!==!1),this._fragment=null,this._state={}},f});
